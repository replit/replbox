parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"VX70":[function(require,module,exports) {
  var global = arguments[3];
  var t=arguments[3];function e(t,e){this.iframe=document.createElement("iframe"),this.iframe.style.display="none",(e=e||document.body).appendChild(this.iframe);this.iframe.contentWindow;t&&this.extend(t)}e.prototype.evaluate=function(t){return this.iframe.contentWindow.eval(t)},e.prototype.destroy=function(){this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),this.iframe=null)},e.prototype.getGlobal=function(){return this.iframe.contentWindow},e.prototype.extend=function(t){var e=this.getGlobal();Object.keys(t).forEach(function(i){e[i]=t[i]})},module.exports=e;
  },{}],"guaG":[function(require,module,exports) {
  var n={ABS:function(n){return Math.abs(n)},COS:function(n){return Math.cos(n)},SIN:function(n){return Math.sin(n)},TAN:function(n){return Math.tan(n)},EXP:function(n){return Math.exp(n)},INT:function(n){return Math.floor(n)},FLOOR:function(n){return Math.floor(n)},ROUND:function(n){return Math.round(n)},ATN:function(n){return Math.atan(n)},LOG:function(n){return Math.log(n)},SGN:function(n){return 0===n?0:n<0?-1:1},SQR:function(n){return Math.sqrt(n)},VAL:function(n){var t=parseFloat(n);return isNaN(t)?0:t},RND:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===n?Math.random():Math.ceil(Math.random()*n)},ASC:function(n){return n.charCodeAt(0)},LEFT:function(n,t){return n.slice(0,t)},MID:function(n,t,r){return n.substr(t,r)},RIGHT:function(n,t){return n.slice(-1*t)},CHR:function(n){return String.fromCharCode(n)},STR:function(n){return String.fromCharCode(n)},LEN:function(n){return n.length},SPC:function(n){return" ".repeat(n)},COLOR:function(){throw new Error("Unimplemented")},GETCHAR:function(){throw new Error("Unimplemented")},UPPERCASE:function(n){return n.toUpperCase()},LOWERCASE:function(n){return n.toLowerCase()}},t={LEFT$:"LEFT",ATAN:"ATN",CHR$:"CHR",MID$:"MID",RIGHT$:"RIGHT",RAND:"RND",TAB:"SPC"};for(var r in t)n[r]=n[t[r]];module.exports=n;
  },{}],"u74b":[function(require,module,exports) {
  function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}var i=require("./functions"),s=function(){function e(n,i){t(this,e),this.type=n,this.lexeme=i}return n(e,[{key:"toJSON",value:function(){return{type:this.type,lexeme:this.lexeme}}}]),e}(),r=new s("eof",""),o=["IF","THEN","ELSE","FOR","ON","TO","STEP","GOTO","GOSUB","RETURN","NEXT","INPUT","LET","CLC","CLT","CLS","END","PRINT","PLOT","DRAW","UNDRAW","ARRAY","DIM","DATA","READ","REM","PAUSE","STOP"],a=["LEVEL","PI"],u=/^\s*(\d+)\s*/,h=/^"((\\.|[^"\\])*)"\s*/,l=new RegExp("^("+o.join("|")+")\\s*","i"),c=new RegExp("^("+Object.keys(i).join("|")+")\\s*","i"),k=new RegExp("^("+a.join("|")+")\\s*","i"),f=/^([a-z][0-9]*)\$?\s*/i,p=/^(\d+(\.\d+)?)\s*/i,v=/^(<>|>=|<=|[,\+\-\*\/%=<>\(\)\]\[])\s*/i,m=/^(AND|OR)\s*/i,d=/^(;)\s*/i,y=function(){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,e),this.stmnt=n,this.tokens=[],this.index=0,this.tokenized=!1,this.debug=i.debug||!1}return n(e,null,[{key:"tokenizeLine",value:function(t,n){var i=new e(t,{debug:n});return i.tokenize(),i.tokens}},{key:"expressionTypes",get:function(){return["string","function","operation","number","variable","logic","constant"]}},{key:"eof",get:function(){return r}}]),n(e,[{key:"assertTokenized",value:function(){if(!this.tokenized)throw new Error("call tokenize first")}},{key:"peek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.assertTokenized(),this.index>=this.tokens.length?r:this.tokens[this.index+t]}},{key:"next",value:function(){return this.assertTokenized(),this.index>=this.tokens.length?r:this.tokens[this.index++]}},{key:"nextExpr",value:function(){this.assertTokenized();for(var t=[];this.index!==this.tokens.length&&e.expressionTypes.includes(this.peek().type);)t.push(this.next());return t}},{key:"tokenize",value:function(){var t=this.stmnt.match(u);if(!t)throw new Error("Expected line number");for(this.tokens.push(new s("lineno",parseInt(t[1]))),this.stmnt=this.stmnt.slice(t[0].length);this.stmnt.length;){var e=this.eatKeyword()||this.eatQuote()||this.eatLogic()||this.eatFunction()||this.eatConstant()||this.eatVariable()||this.eatNumber()||this.eatOperation()||this.eatLineMod();if(!e)throw this.debug&&console.log("tokens",this.tokense),new Error("Invalid syntax near: `"+this.stmnt+"'");this.stmnt=this.stmnt.slice(e.length)}this.tokenized=!0}},{key:"eatLogic",value:function(){var t=this.stmnt.match(m);if(t&&t[0]){var e=t[1].toUpperCase();return this.tokens.push(new s("logic",e)),t[0]}return null}},{key:"eatKeyword",value:function(){var t=this.stmnt.match(l);if(t&&t[0]){var e=t[1].toUpperCase();return this.tokens.push(new s("keyword",e)),"REM"===e?(this.tokens.push(new s("comment",this.stmnt.slice(t[0].length))),this.stmnt):t[0]}return null}},{key:"eatFunction",value:function(){var t=this.stmnt.match(c);if(t&&t[0]){var e=t[1].toUpperCase();return this.tokens.push(new s("function",e)),t[0]}return null}},{key:"eatConstant",value:function(){var t=this.stmnt.match(k);if(t&&t[0]){var e=t[1].toUpperCase();return this.tokens.push(new s("constant",e)),t[0]}return null}},{key:"eatVariable",value:function(){var t=this.stmnt.match(f);if(t&&t[0]){var e=t[1].toUpperCase();return this.tokens.push(new s("variable",e)),t[0]}return null}},{key:"eatNumber",value:function(){var t=this.stmnt.match(p);if(t&&t[0]){var e=parseFloat(t[1],10);if(isNaN(e))throw new Error("Error parsing number:"+t[1]);return this.tokens.push(new s("number",e)),t[0]}return null}},{key:"eatOperation",value:function(){var t=this.stmnt.match(v);return t&&t[0]?(this.tokens.push(new s("operation",t[1])),t[0]):null}},{key:"eatQuote",value:function(){var t=this.stmnt.match(h);return t&&t[0]?(this.tokens.push(new s("string",'"'.concat(t[1],'"'))),t[0]):null}},{key:"eatLineMod",value:function(){var t=this.stmnt.match(d);return t&&t[0]?(this.tokens.push(new s("linemod",'"'.concat(t[1],'"'))),t[0]):null}}]),e}();module.exports=y;
  },{"./functions":"guaG"}],"lRME":[function(require,module,exports) {
  function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t){return function(){var e,r=i(t);if(u()){var a=i(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return n(this,e)}}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?r(e):n}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}var s=function(){function t(e,n){c(this,t),this.lineno=e,this.type=n}return f(t,[{key:"toJSON",value:function(){var t=this,e={};return Object.keys(this).forEach(function(n){e[n]=t[n]}),e}},{key:"assert",value:function(t,e){if(!t)throw new Error("Line ".concat(this.lineno,": ").concat(e))}}]),t}(),v=function(t){a(r,s);var n=e(r);function r(t,e,u){var i;return c(this,r),(i=n.call(this,t,"variable")).name=e,null==u?i.array=!1:(i.array=!0,i.subscript=u),i}return r}(),h=function(t){a(r,s);var n=e(r);function r(t,e){var u;return c(this,r),(u=n.call(this,t,"REM")).comment=e,u}return f(r,[{key:"run",value:function(){}}]),r}(),p=function(t){a(r,s);var n=e(r);function r(t,e,u){var i;return c(this,r),(i=n.call(this,t,"PRINT")).expr=e,i.newline=!u,i}return f(r,[{key:"run",value:function(t){var e=t.evaluate(this.expr);t.print(e),this.newline&&t.print("\n")}}]),r}(),y=function(t){a(r,s);var n=e(r);function r(t,e){var u;return c(this,r),(u=n.call(this,t,"GOTO")).expr=e,u}return f(r,[{key:"run",value:function(t){var e=t.evaluate(this.expr);this.assert("number"==typeof e,"Expected GOTO `expr` to evaluate to a number"),t.goto(e)}}]),r}(),b=function(t){a(r,s);var n=e(r);function r(t,e,u){var i;return c(this,r),(i=n.call(this,t,"LET")).variable=e,i.expr=u,i}return f(r,[{key:"run",value:function(t){var e=t.evaluate(this.expr);if(this.variable.array){var n=t.evaluate(this.variable.subscript);t.setArray(this.variable.name,n,e)}else t.set(this.variable.name,e)}}]),r}(),m=function(t){a(r,s);var n=e(r);function r(t,e){var u;return c(this,r),(u=n.call(this,t,"PAUSE")).expr=e,u}return f(r,[{key:"run",value:function(t){var e=t.evaluate(this.expr);if("number"!=typeof e)throw new Error("Expected pause value to be a number");t.pause(e)}}]),r}(),O=function(t){a(r,s);var n=e(r);function r(t,e,u){var i;return c(this,r),(i=n.call(this,t,"INPUT")).expr=e,i.variable=u,i}return f(r,[{key:"run",value:function(t){var e=this,n=t.evaluate(this.expr);t.print(n),t.halt(),t.input(function(n){if(e.variable.array){var r=t.evaluate(e.variable.subscript);t.setArray(e.variable.name,r,n)}else t.set(e.variable.name,n);t.execute()})}}]),r}(),x=function(t){a(r,s);var n=e(r);function r(t,e,u,i,a){var o;return c(this,r),(o=n.call(this,t,"FOR")).lineno=t,o.variable=e,o.left=u,o.right=i,o.step=a,o}return f(r,[{key:"run",value:function(t){var e=t.evaluate(this.left),n=t.evaluate(this.right),r=this.step?t.evaluate(this.step):1;if(this.variable.array)throw new Error("Cannot use variables in for");t.loopStart({variable:this.variable.name,value:e,max:n,increment:r})}}]),r}(),k=function(t){a(r,s);var n=e(r);function r(t,e){var u;return c(this,r),(u=n.call(this,t,"NEXT")).variable=e,u}return f(r,[{key:"run",value:function(t){t.loopJump(this.variable.name)}}]),r}(),E=function(t){a(r,s);var n=e(r);function r(t,e,u){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"black";return c(this,r),(i=n.call(this,t,"PLOT")).x=e,i.y=u,i.color=a,i}return f(r,[{key:"run",value:function(t){t.plot(t.evaluate(this.x),t.evaluate(this.y),t.evaluate(this.color))}}]),r}(),w=function(t){a(r,s);var n=e(r);function r(){return c(this,r),n.apply(this,arguments)}return f(r,[{key:"run",value:function(t){t.end()}}]),r}(),R=function(t){a(r,s);var n=e(r);function r(t,e,u,i){var a;return c(this,r),(a=n.call(this,t,"IF")).condition=e,a.then=u,a.elze=i,a}return f(r,[{key:"run",value:function(t){t.evaluate(this.condition)?this.then.run(t):this.other&&this.elze.run(t)}}]),r}(),T=function(t){a(r,s);var n=e(r);function r(t,e){var u;return c(this,r),(u=n.call(this,t,"GOSUB")).expr=e,u}return f(r,[{key:"run",value:function(t){var e=t.evaluate(this.expr);if("number"!=typeof e)throw new Error("Expected GOSUB argument to be a number");t.gosub(e)}}]),r}(),d=function(t){a(r,s);var n=e(r);function r(){return c(this,r),n.apply(this,arguments)}return f(r,[{key:"run",value:function(t){t.return()}}]),r}(),S=function(t){a(r,s);var n=e(r);function r(t,e){var u;return c(this,r),(u=n.call(this,t,"ARRAY")).variable=e,u}return f(r,[{key:"run",value:function(t){t.array(this.variable.name)}}]),r}(),P=function(t){a(r,s);var n=e(r);function r(){return c(this,r),n.apply(this,arguments)}return f(r,[{key:"run",value:function(t){t.clearAll()}}]),r}(),g=function(t){a(r,s);var n=e(r);function r(){return c(this,r),n.apply(this,arguments)}return f(r,[{key:"run",value:function(t){t.clearConsole()}}]),r}(),N=function(t){a(r,s);var n=e(r);function r(){return c(this,r),n.apply(this,arguments)}return f(r,[{key:"run",value:function(t){t.clearGraphics()}}]),r}();module.exports={Node:s,PRINT:p,GOTO:y,LET:b,REM:h,PAUSE:m,INPUT:O,FOR:x,NEXT:k,PLOT:E,END:w,IF:R,GOSUB:T,RETURN:d,ARRAY:S,CLS:P,CLT:g,CLC:N,Variable:v};
  },{}],"pSkh":[function(require,module,exports) {
  function e(e){for(var t="";e.length;){var l=e.shift();if("variable"!==l.type)if("function"!==l.type)if("constant"!==l.type)if("logic"!==l.type){if("operation"===l.type){if("<>"===l.lexeme){t+="!=";continue}if("="===l.lexeme){t+="==";continue}}t+=l.lexeme}else"AND"===l.lexeme?t+="&&":"OR"===l.lexeme&&(t+="||");else t+='__pgb.getConst("'+l.lexeme+'")';else t+='__pgb.fun("'+l.lexeme+'")';else t+='__pgb.get("'+l.lexeme+'")'}return t}module.exports=e;
  },{}],"CUYV":[function(require,module,exports) {
  function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r=require("./tokenizer"),i=require("./nodes"),o=i.PRINT,c=i.LET,s=i.REM,p=i.PAUSE,a=i.INPUT,h=i.FOR,l=i.NEXT,x=i.GOTO,u=i.END,k=i.IF,w=i.GOSUB,E=i.RETURN,v=i.ARRAY,f=i.PLOT,y=i.CLS,m=i.CLC,d=i.CLT,b=i.Variable,z=require("./expr"),T=function(){function t(n,r){e(this,t),this.tokenizer=n,this.lineno=r}return n(t,null,[{key:"parseLine",value:function(e){var n=new r(e,{debug:!0});n.tokenize();var i=L(n.next());return new t(n,i).parse()}}]),n(t,[{key:"parse",value:function(){var e=this.tokenizer.next();switch(O(e,"keyword"),e.lexeme){case"PRINT":return new o(this.lineno,this.expectExpr(),this.acceptLineMod());case"LET":var t=this.expectVariable();return this.expectOperation("="),new c(this.lineno,t,this.expectExpr());case"REM":return new s(this.lineno,this.expectComment());case"PAUSE":return new p(this.lineno,this.expectExpr());case"INPUT":var n=this.expectExpr();return this.expectLineMod(),new a(this.lineno,n,this.expectVariable());case"FOR":var r=this.expectVariable();this.expectOperation("=");var i=this.expectExpr();this.expectKeyword("TO");var b=this.expectExpr(),z=this.acceptKeyword("STEP")?this.expectExpr():null;return new h(this.lineno,r,i,b,z);case"NEXT":return new l(this.lineno,this.expectVariable());case"GOTO":return new x(this.lineno,this.expectExpr());case"END":return new u(this.lineno);case"IF":var T,L=this.expectExpr();this.expectKeyword("THEN"),T="number"===this.tokenizer.peek().type?new x(this.lineno,this.expectExpr()):this.parse();var R=null;return this.acceptKeyword("else")&&(R="number"===this.tokenizer.peek().type?new x(this.lineno,this.expectExpr()):this.parse()),new k(this.lineno,L,T,R);case"GOSUB":return new w(this.lineno,this.expectExpr());case"RETURN":return new E(this.lineno);case"ARRAY":return new v(this.lineno,this.expectVariable());case"PLOT":var C=this.expectExpr(!0);this.expectOperation(",");var N=this.expectExpr(!0);this.expectOperation(",");var P=this.expectExpr(!0);return new f(this.lineno,C,N,P);case"CLS":return new y(this.lineno);case"CLC":return new m(this.lineno);case"CLT":return new d(this.lineno)}throw new Error("Unexpected token ".concat(e.lexeme))}},{key:"acceptKeyword",value:function(e){return"keyword"===this.tokenizer.peek().type?this.tokenizer.next():null}},{key:"expectKeyword",value:function(e){var t=this.acceptKeyword(e);if(null==t)throw new Error("Expected ".concat(e," but got ").concat(this.tokenizer.peek().lexeme));return t.lexeme}},{key:"expectComment",value:function(){var e=this.tokenizer.next();return"comment"===e.type?(O(this.tokenizer.next(),"eof"),e.lexeme):(O(e,"eof"),"")}},{key:"expectOperation",value:function(e){var t=this.tokenizer.next();if(O(t,"operation"),t.lexeme!==e)throw new Error("Expected operation "+e);return t.lexeme}},{key:"expectVariable",value:function(){var e=this.tokenizer.next();return O(e,"variable"),new b(this.lineno,e.lexeme,this.acceptSubscript())}},{key:"expectExpr",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[],n=0;this.tokenizer.peek()!=r.eof&&(!e||","!==this.tokenizer.peek().lexeme)&&r.expressionTypes.includes(this.tokenizer.peek().type);){var i=this.tokenizer.peek();if(0===n&&("]"===i.lexeme||")"===i.lexeme))break;this.tokenizer.next(),"["!==i.lexeme&&"("!==i.lexeme||n++,"]"!==i.lexeme&&"]"!==i.lexeme||n--,t.push(i)}if(0===t.length)throw new Error("Expected expression");return z(t)}},{key:"expectLineMod",value:function(){if(!this.acceptLineMod())throw new Error("Expected ;");return!0}},{key:"acceptLineMod",value:function(){return"linemod"===this.tokenizer.peek().type&&(this.tokenizer.next(),!0)}},{key:"acceptSubscript",value:function(){if("["!==this.tokenizer.peek().lexeme)return null;O(this.tokenizer.next(),"operation","[");var e=this.expectExpr();return O(this.tokenizer.next(),"operation","]"),e}}]),t}();function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.type!==t)throw new Error("Expect token of type ".concat(t," but got ").concat(e.type));if(null!=n&&e.lexeme!==n)throw new Error("Expected token value to be ".concat(n," but got ").concat(e.lexeme))}function L(e){if(O(e,"lineno"),"number"!=typeof e.lexeme)throw new Error("lineno should be a number");return e.lexeme}module.exports=T;
  },{"./tokenizer":"u74b","./nodes":"lRME","./expr":"pSkh"}],"FOWO":[function(require,module,exports) {
  function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}var i=require("context-eval"),r=require("./parser"),o=require("./functions"),s=function(){function t(n){var r=n.console,o=n.debugLevel,s=n.display,a=n.constants,u=void 0===a?{PI:Math.PI,LEVEL:1}:a;e(this,t),this.debugLevel=o,this.console=r,this.context=new i({__pgb:this}),this.variables={},this.lineno=-1,this.program=[],this.loops={},this.stack=[],this.jumped=!1,this.display=s,this.constants=u}return n(t,[{key:"debug",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.debugLevel>=t&&console.log("Debug ".concat(this.lineno,":"),e)}},{key:"run",value:function(e){var t={};if(this.program=e.split("\n").filter(function(e){return""!==e.trim()}).map(function(e){return r.parseLine(e)}).sort(function(e,t){return e.lineno-t.lineno}),this.program.forEach(function(e){var n=e.lineno;if(t[n])throw new Error("Line with number ".concat(n," repeated"));t[n]=!0}),!this.program.length)return this.end();this.lineno=this.program[0].lineno,this.execute()}},{key:"execute",value:function(){for(var e=this;;){if(this.step(),this.ended)return;if(this.jumped)this.jumped=!1;else{var t=this.getNextLine();if(!t)return void this.end();this.lineno=t.lineno}if(this.delay){var n=this.delay;return this.delay=null,setTimeout(function(){e.execute()},n)}if(this.halted)return}}},{key:"getCurLine",value:function(){var e=this;return this.program.find(function(t){return t.lineno===e.lineno})}},{key:"getNextLine",value:function(){return this.program[this.program.indexOf(this.getCurLine())+1]}},{key:"step",value:function(){var e=this.getCurLine();if(!e)throw new Error("Cannot find line with number ".concat(this.lineno));this.debug("step",1),this.debug(e.toJSON(),2),e.run(this)}},{key:"end",value:function(){this.ended=!0,this.debug("program ended")}},{key:"evaluate",value:function(e){try{return this.context.evaluate(e)}catch(t){throw console.error("Error evaluating code:",e),t}}},{key:"set",value:function(e,t){this.variables[e]=t}},{key:"setArray",value:function(e,t,n){this.variables[e][t]=n}},{key:"array",value:function(e){this.variables[e]={}}},{key:"fun",value:function(e){if(!o[e])throw new Error("Function ".concat(e," does not exist"));switch(e.toLowerCase()){case"color":return this.color.bind(this);case"getchar":return this.getChar.bind(this)}return o[e]}},{key:"get",value:function(e){return this.variables[e]||0}},{key:"getConst",value:function(e){if(this.constants.hasOwnProperty(e))return this.constants[e];throw new Error("Constant ".concat(e," undefined"))}},{key:"pause",value:function(e){this.debug("pause ".concat(e)),this.delay=e}},{key:"goto",value:function(e){this.debug("goto ".concat(e)),this.lineno=e,this.jumped=!0}},{key:"loopStart",value:function(e){var t=e.variable,n=e.value,i=e.increment,r=e.max;this.debug("marking loop ".concat(t)),this.set(t,n);var o=this.getNextLine();if(!o)return this.end();this.loops[t]={variable:t,value:n,increment:i,max:r,lineno:o.lineno}}},{key:"loopJump",value:function(e){this.debug("jumping to loop ".concat(e));var t=this.loops[e];t.value+=t.increment,this.set(t.variable,t.value),t.value>=t.max||this.goto(t.lineno)}},{key:"gosub",value:function(e){var t=this.getNextLine();t?this.stack.push(t.lineno):this.stack.push(this.lineno+1),this.goto(e)}},{key:"return",value:function(){if(0===this.stack.length)throw new Error("No function calls to return from");var e=this.stack.pop();this.goto(e)}},{key:"assertDisplay",value:function(){if(!this.display)throw new Error("No display found")}},{key:"plot",value:function(e,t,n){this.assertDisplay(),this.display.plot(e,t,n)}},{key:"color",value:function(e,t){return this.assertDisplay(),this.display.color(e,t)}},{key:"clearAll",value:function(){this.clearConsole(),this.clearGraphics()}},{key:"print",value:function(e){this.console.write(e.toString())}},{key:"clearConsole",value:function(){this.console.clear()}},{key:"clearGraphics",value:function(){this.assertDisplay(),this.display.clear()}},{key:"getChar",value:function(){return this.assertDisplay(),this.display.getChar()||""}},{key:"input",value:function(e){this.console.input(e)}},{key:"halt",value:function(){this.halted=!0}}]),t}();module.exports=s;
  },{"context-eval":"VX70","./parser":"CUYV","./functions":"guaG"}]},{},["FOWO"], null)
  //# sourceMappingURL=/basic.js.map